# Kconfig - ICM20649 accelerometer and gyroscope sensor configuration
# options

#
# Copyright (c) 2018 LeanUp
#
# SPDX-License-Identifier: Apache-2.0
#

menuconfig ICM20649
	bool "ICM20649 SPI accelerometer and gyroscope Chip"
	depends on SENSOR && SPI
	default n
	help
	  Enable driver for ICM20649 accelerometer and gyroscope
	  sensor.

config ICM20649_NAME
	string "ICM20649 device name"
	depends on ICM20649
	default "ICM20649"

config ICM20649_SPI_SELECT_SLAVE
	hex "ICM20649 SPI slave select pin"
	depends on ICM20649
	default 1
	help
	  ICM20649 SPI chip select pin (active low).

config ICM20649_SPI_BUS_FREQ
	int "ICM20649 SPI bus speed in Hz"
	default 8000000
	depends on ICM20649
	help
	  This is the maximum supported SPI bus frequency. The chip supports a
	  frequency up to 8MHz.

config ICM20649_SPI_MASTER_DEV_NAME
	string "SPI master name where ICM20649 chip is connected"
	depends on ICM20649
	default "SPI_2"
	help
	  Specify the device name of the spi master device to which ICM20649 is
	  connected.

config ICM20649_VERIFY_WRITE
	bool "ICM20649 Verify register writes read back the same value"
	default n
	depends on ICM20649
	help
	  This option is meant to be used to debug register setup.

config ICM20649_SPI_GPIO_CS
	bool "ICM20649 SPI CS through a GPIO pin"
	default n
	depends on ICM20649
	help
	  This option is useful if one needs to manage SPI CS through a GPIO
	  pin to by-pass the SPI controller's CS logic.

config ICM20649_SPI_GPIO_CS_DRV_NAME
	string "GPIO driver's name to use to drive SPI CS through"
	default ""
	depends on ICM20649_SPI_GPIO_CS
	help
	  This option is mandatory to set which GPIO controller to use in order
	  to actually emulate the SPI CS.

config ICM20649_SPI_GPIO_CS_PIN
	int "GPIO PIN to use to drive SPI CS through"
	default 0
	depends on ICM20649_SPI_GPIO_CS
	help
	  This option is mandatory to set which GPIO pin to use in order
	  to actually emulate the SPI CS.

choice
	prompt "Trigger mode"
	depends on ICM20649
	default ICM20649_TRIGGER_NONE
	help
	  Specify the type of triggering to be used by the driver.

config ICM20649_TRIGGER_NONE
	bool
	prompt "No trigger"

config ICM20649_TRIGGER_GLOBAL_THREAD
	bool
	prompt "Use global thread"
	depends on GPIO
	select ICM20649_TRIGGER

config ICM20649_TRIGGER_OWN_THREAD
	bool
	prompt "Use own thread"
	depends on GPIO
	select ICM20649_TRIGGER

endchoice

config ICM20649_TRIGGER
	bool
	depends on ICM20649

config ICM20649_GPIO_DEV_NAME
	string
	prompt "GPIO device"
	depends on ICM20649 && ICM20649_TRIGGER
	help
	  The device name of the GPIO device to which the ICM20649 interrupt pin
	  is connected.

config ICM20649_GPIO_PIN_NUM
	int
	prompt "Interrupt GPIO pin number"
	depends on ICM20649 && ICM20649_TRIGGER
	help
	  The number of the GPIO on which the interrupt signal from the ICM20649
	  chip will be received.

config ICM20649_THREAD_PRIORITY
	int
	prompt "Thread priority"
	depends on ICM20649 && ICM20649_TRIGGER_OWN_THREAD
	default 10
	help
	  Priority of thread used by the driver to handle interrupts.

config ICM20649_THREAD_STACK_SIZE
	int
	prompt "Thread stack size"
	depends on ICM20649 && ICM20649_TRIGGER_OWN_THREAD
	default 1024
	help
	  Stack size of thread used by the driver to handle interrupts.

config ICM20649_ENABLE_TEMP
	bool "Enable temperature"
	depends on ICM20649
	default n
	help
	  Enable/disable temperature

menu "Attributes"
	depends on ICM20649

config ICM20649_GYRO_FS
	int
	prompt "Gyroscope full-scale range"
	depends on ICM20649
	default 0
	help
	  Specify the default gyroscope full-scale range.
	  An X value for the config represents a range of +/- X degree per
	  second. Valid values are:
	  0:  Full Scale selected at runtime
	  500:   +/- 500dps
	  1000:  +/- 1000dps
	  2000:  +/- 2000dps
	  4000:  +/- 4000dps

config ICM20649_ACCEL_FS
	int
	prompt "Accelerometer full-scale range"
	depends on ICM20649
	default 0
	help
	  Specify the default accelerometer full-scale range.
	  An X value for the config represents a range of +/- X G. Valid values
	  are:
	  0:  Full Scale selected at runtime
	  2:  +/- 2g
	  4:  +/- 4g
	  8:  +/- 8g
	  16: +/- 16g
	  30: +/- 30g

endmenu
